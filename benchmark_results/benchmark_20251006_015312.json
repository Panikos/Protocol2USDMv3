{
  "timestamp": "2025-10-06T01:46:25.044332",
  "model": "gemini-2.5-pro",
  "test_cases": {
    "CDISC_Pilot_Study": {
      "validation_pass": false,
      "completeness_score": 0.0,
      "linkage_accuracy": 0.0,
      "field_population_rate": 0.0,
      "execution_time_seconds": 407.291704,
      "error_occurred": true,
      "error_message": "\nProcessing PDFs:   0%|          | 0/1 [00:00<?, ?it/s][INFO] Processing C:\\Users\\panik\\Documents\\GitHub\\Protcol2USDMv3\\test_data\\medium\\CDISC_Pilot_Study.pdf ...\n--- Log from find_soa_pages.py ---\n[INFO] Loaded find SoA pages template v2.0\n[DEBUG] find_soa_pages.py script execution started.\n================================================================================\n[DEBUG] *** USING UPDATED find_soa_pages.py WITH GPT-5 FIX ***\n================================================================================\n[DEBUG] find_soa_pages.py main() started\n[INFO] Using LLM model: gemini-2.5-pro\n[INFO] Loaded prompt context from output\\CDISC_Pilot_Study\\1_llm_prompt.txt\n[DEBUG] Starting PDF text extraction...\n[DEBUG] PDF text extraction complete. Extracted 97 pages.\n[DEBUG] Starting keyword filtering...\n[DEBUG] Keyword filtering complete.\n[INFO] Keyword candidate pages: [4, 8, 27, 30, 35, 36, 52, 53, 54, 82]\n[INFO] Running LLM adjudication on keyword candidate pages...\n[DEBUG] Using max_tokens for standard model: gemini-2.5-pro\n[DEBUG] Sending request to gemini-2.5-pro for page adjudication...\n[DEBUG] Request params keys: ['model', 'messages', 'temperature', 'max_tokens']\n[DEBUG] Received response from gemini-2.5-pro.\n[LLM][text] Page 4 response: False\n[INFO] Text-based check failed for page 4. Trying vision-based analysis...\n[LLM][vision] Page 4 response: False\n[DEBUG] Using max_tokens for standard model: gemini-2.5-pro\n[DEBUG] Sending request to gemini-2.5-pro for page adjudication...\n[DEBUG] Request params keys: ['model', 'messages', 'temperature', 'max_tokens']\n[DEBUG] Received response from gemini-2.5-pro.\n[LLM][text] Page 8 response: False\n[INFO] Text-based check failed for page 8. Trying vision-based analysis...\n[LLM][vision] Page 8 response: False\n[DEBUG] Using max_tokens for standard model: gemini-2.5-pro\n[DEBUG] Sending request to gemini-2.5-pro for page adjudication...\n[DEBUG] Request params keys: ['model', 'messages', 'temperature', 'max_tokens']\n[DEBUG] Received response from gemini-2.5-pro.\n[LLM][text] Page 27 response: False\n[INFO] Text-based check failed for page 27. Trying vision-based analysis...\n[LLM][vision] Page 27 response: False\n[DEBUG] Using max_tokens for standard model: gemini-2.5-pro\n[DEBUG] Sending request to gemini-2.5-pro for page adjudication...\n[DEBUG] Request params keys: ['model', 'messages', 'temperature', 'max_tokens']\n[DEBUG] Received response from gemini-2.5-pro.\n[LLM][text] Page 30 response: False\n[INFO] Text-based check failed for page 30. Trying vision-based analysis...\n[LLM][vision] Page 30 response: False\n[DEBUG] Using max_tokens for standard model: gemini-2.5-pro\n[DEBUG] Sending request to gemini-2.5-pro for page adjudication...\n[DEBUG] Request params keys: ['model', 'messages', 'temperature', 'max_tokens']\n[DEBUG] Received response from gemini-2.5-pro.\n[LLM][text] Page 35 response: False\n[INFO] Text-based check failed for page 35. Trying vision-based analysis...\n[LLM][vision] Page 35 response: False\n[DEBUG] Using max_tokens for standard model: gemini-2.5-pro\n[DEBUG] Sending request to gemini-2.5-pro for page adjudication...\n[DEBUG] Request params keys: ['model', 'messages', 'temperature', 'max_tokens']\n[DEBUG] Received response from gemini-2.5-pro.\n[LLM][text] Page 36 response: False\n[INFO] Text-based check failed for page 36. Trying vision-based analysis...\n[LLM][vision] Page 36 response: False\n[DEBUG] Using max_tokens for standard model: gemini-2.5-pro\n[DEBUG] Sending request to gemini-2.5-pro for page adjudication...\n[DEBUG] Request params keys: ['model', 'messages', 'temperature', 'max_tokens']\n[DEBUG] Received response from gemini-2.5-pro.\n[LLM][text] Page 52 response: False\n[INFO] Text-based check failed for page 52. Trying vision-based analysis...\n[LLM][vision] Page 52 response: True\n[DEBUG] Using max_tokens for standard model: gemini-2.5-pro\n[DEBUG] Sending request to gemini-2.5-pro for page adjudication...\n[DEBUG] Request params keys: ['model', 'messages', 'temperature', 'max_tokens']\n[DEBUG] Received response from gemini-2.5-pro.\n[LLM][text (contiguous)] Page 53 response: True\n[DEBUG] Using max_tokens for standard model: gemini-2.5-pro\n[DEBUG] Sending request to gemini-2.5-pro for page adjudication...\n[DEBUG] Request params keys: ['model', 'messages', 'temperature', 'max_tokens']\n[DEBUG] Received response from gemini-2.5-pro.\n[LLM][text (contiguous)] Page 54 response: True\n[DEBUG] Using max_tokens for standard model: gemini-2.5-pro\n[DEBUG] Sending request to gemini-2.5-pro for page adjudication...\n[DEBUG] Request params keys: ['model', 'messages', 'temperature', 'max_tokens']\n[DEBUG] Received response from gemini-2.5-pro.\n[LLM][text (contiguous)] Page 55 response: False\n[DEBUG] Using max_tokens for standard model: gemini-2.5-pro\n[DEBUG] Sending request to gemini-2.5-pro for page adjudication...\n[DEBUG] Request params keys: ['model', 'messages', 'temperature', 'max_tokens']\n[DEBUG] Received response from gemini-2.5-pro.\n[LLM][text] Page 82 response: False\n[INFO] Text-based check failed for page 82. Trying vision-based analysis...\n[LLM][vision] Page 82 response: False\n[RESULT] SOA pages: [52, 53, 54]\n\n--- End log ---\n--- Log from vision_extract_soa.py ---\n[2025-10-06 01:50:14] [INFO] Processing image: output\\CDISC_Pilot_Study\\3_soa_images\\soa_page_52.png\n[2025-10-06 01:50:14] [INFO] Processing 1 images with model 'gemini-2.5-pro'.\n[2025-10-06 01:50:14] [INFO] Sending request to Gemini API...\n[2025-10-06 01:50:49] [INFO] [SUCCESS] Extracted SoA from output\\CDISC_Pilot_Study\\3_soa_images\\soa_page_52.png.\n[2025-10-06 01:50:49] [INFO] Processing image: output\\CDISC_Pilot_Study\\3_soa_images\\soa_page_53.png\n[2025-10-06 01:50:49] [INFO] Processing 1 images with model 'gemini-2.5-pro'.\n[2025-10-06 01:50:49] [INFO] Sending request to Gemini API...\n[2025-10-06 01:51:51] [INFO] [SUCCESS] Extracted SoA from output\\CDISC_Pilot_Study\\3_soa_images\\soa_page_53.png.\n[2025-10-06 01:51:51] [INFO] Processing image: output\\CDISC_Pilot_Study\\3_soa_images\\soa_page_54.png\n[2025-10-06 01:51:51] [INFO] Processing 1 images with model 'gemini-2.5-pro'.\n[2025-10-06 01:51:51] [INFO] Sending request to Gemini API...\n[2025-10-06 01:53:08] [INFO] [SUCCESS] Extracted SoA from output\\CDISC_Pilot_Study\\3_soa_images\\soa_page_54.png.\n[2025-10-06 01:53:08] [INFO] Successfully extracted SoA data from 3 images. Merging...\n[2025-10-06 01:53:08] [WARNING] Skipping malformed SoA part: {'Wrapper-Input': {'study': {'name': 'Protocol H2Q-MC-LZTT(c)', 'instanceType': 'Study', 'versions': [{'id': 'v1', 'versionIdentifier': '1.0', 'rationale': 'Initial version from SoA', 'studyIdentifier\n[2025-10-06 01:53:08] [INFO] Wrote merged_soa SoA vision output to output\\CDISC_Pilot_Study\\6_raw_vision_soa.json\n\n--- End log ---\n--- Log from validate_soa_structure.py ---\n[INFO] [STRUCTURE VALIDATION] Entity counts:\n[INFO]   - epochs: 0\n[INFO]   - encounters: 0\n[INFO]   - plannedTimepoints: 7\n[INFO]   - activities: 37\n[INFO]   - activityGroups: 0\n[INFO]   - activityTimepoints: 66\n[INFO]   - scheduleTimelines: 0\n[WARNING] [LINKAGE ERRORS] Detected:\n[WARNING]   \\ufffd PlannedTimepoint tp1 references missing encounterId 'enc_1'.\n[WARNING]   \\ufffd PlannedTimepoint tp2 references missing encounterId 'enc_2'.\n[WARNING]   \\ufffd PlannedTimepoint tp3 references missing encounterId 'enc_3'.\n[WARNING]   \\ufffd PlannedTimepoint tp4 references missing encounterId 'enc_4'.\n[WARNING]   \\ufffd PlannedTimepoint tp5 references missing encounterId 'enc_5'.\n[WARNING]   \\ufffd PlannedTimepoint tp6 references missing encounterId 'enc_6'.\n[WARNING]   \\ufffd PlannedTimepoint tp7 references missing encounterId 'enc_7'.\n[WARNING] [NOTE] Continuing despite errors - reconciliation steps may fix these issues.\n[INFO] Validation complete with warnings. Proceeding to reconciliation.\n\n--- End log ---\n--- Log from validate_soa_structure.py ---\n[INFO] [STRUCTURE VALIDATION] Entity counts:\n[INFO]   - epochs: 0\n[INFO]   - encounters: 15\n[INFO]   - plannedTimepoints: 7\n[INFO]   - activities: 37\n[INFO]   - activityGroups: 0\n[INFO]   - activityTimepoints: 66\n[INFO]   - scheduleTimelines: 0\n[WARNING] [LINKAGE ERRORS] Detected:\n[WARNING]   \\ufffd PlannedTimepoint tp1 references missing encounterId 'enc_1'.\n[WARNING]   \\ufffd PlannedTimepoint tp2 references missing encounterId 'enc_2'.\n[WARNING]   \\ufffd PlannedTimepoint tp3 references missing encounterId 'enc_3'.\n[WARNING]   \\ufffd PlannedTimepoint tp4 references missing encounterId 'enc_4'.\n[WARNING]   \\ufffd PlannedTimepoint tp5 references missing encounterId 'enc_5'.\n[WARNING]   \\ufffd PlannedTimepoint tp6 references missing encounterId 'enc_6'.\n[WARNING]   \\ufffd PlannedTimepoint tp7 references missing encounterId 'enc_7'.\n[WARNING] [NOTE] Continuing despite errors - reconciliation steps may fix these issues.\n[INFO] Validation complete with warnings. Proceeding to reconciliation.\n\n--- End log ---\n\nProcessing PDFs:   0%|          | 0/1 [06:46<?, ?it/s]\n",
      "usdm_metrics": {}
    }
  }
}